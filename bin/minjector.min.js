var c=function(a){"use strict";this.cache={},this.isRequired={},this.defineQueue=[],this.procWaiting=!1,this.Bound={},this.Bound.processDefineQueue=this.processDefineQueue.bind(this),this.cfg={baseUrl:"./",libUrl:"./",map:{}},a&&this.config(a)},a=c.prototype;a.isNodeJs="undefined"!=typeof exports&&this.exports!==exports,a.config=function(a){a.baseUrl&&(this.cfg.baseUrl=a.baseUrl),a.libUrl&&(this.cfg.libUrl=a.libUrl),a.map&&(this.cfg.map=a.map)},a.define=function(a,b,c){var d=arguments.length;if(1===d&&(c=a,b=void 0,a=void 0),2===d&&(c=b,Array.isArray(a)?(b=a,a=void 0):b=void 0),"function"!=typeof c)throw new Error("Require module factory function: "+a);if(a&&this.cache[a])throw new Error("Found ambiguous module: "+a);var e=this.initModule(a,b,c);a&&(this.cache[a]=e),this.defineQueue.push(e),this.procWaiting||(this.procWaiting=!0,this.onNextTick(this.Bound.processDefineQueue))},a.initModule=function(a,b,c){return{id:a,dependencies:b,factory:c,ready:!1,instance:null,listen:[],parent:null}},a.processDefineQueue=function(d,e){this.procWaiting=!1;var b=this.defineQueue;if(0!==b.length){for(var a,c=[];b.length;)a=b.pop(),a.parent=e,a.id||(a.id=d),c.push(a);for(;c.length;)this.createModule(c.pop())}},a.createModule=function(b,i){var f=b.dependencies,g=[],d=!1;if(void 0!==f){var e,h,a,c;for(e=0,h=f.length;h>e;e++)c=f[e],a="require"===c?{ready:!0,instance:function(a,c){return this.require(a,c,b)}.bind(this)}:this.cache[c],a?a.ready?a=a.instance:(d=!0,a=this.listenOnCreation(a)):(d=!0,a=this.isRequired[c],a||(a=this.requireDependency(c,b),a instanceof Promise?this.isRequired[c]=a:d=!1)),g.push(a)}return b.id&&!i&&(this.cache[b.id]=b),d?b.instance=Promise.all(g).then(function(a){var c=b;return this.callFactoryCallback(c,a)}.bind(this)).catch(function(a){console.error(a.stack)}):this.callFactoryCallback(b,g),b},a.callFactoryCallback=function(a,d){a.instance=a.factory.apply(null,d),a.ready=!0,delete this.isRequired[a.id];var b,c;for(b=0,c=a.listen.length;c>b;b++)a.listen[b](a.instance);return delete a.listen,a},a.listenOnCreation=function(a){return new Promise(function(b){a.listen.push(function(a){b(a)})})},a.isNodeJs?a.requireDependency=function(a,c){require(this.createPath(a,c)),this.processDefineQueue(a,c);var b=this.cache[a];return b.ready?b.instance:new Promise(function(a){b.listen.push(function(b){a(b)})})}:(a.domDocumentHead=document.head,a.requireDependency=function(a,b){return new Promise(function(d){var c=document.createElement("script");c.src=this.createPath(a,b)+".js",c.type="text/javascript",c.charset="utf-8",c._moduleId=a,c.addEventListener("load",function(e){var c=e.target._moduleId;this.processDefineQueue(c,b);var a=this.cache[c];a.ready?d(a.instance):a.listen.push(function(a){d(a)})}.bind(this),!1),this.domDocumentHead.appendChild(c)}.bind(this))}),a.createPath=function(b,e){var c,a,d=this.cfg.map[e.id];d&&d[b]&&(b=d[b]),c=b.charAt(0),"."===c?(a=this.resolveParents(e),a+=b,c=a.charAt(0)):a=b;var f="."===c||"/"===c?this.cfg.baseUrl:this.cfg.libUrl;return"/"===c&&(a=a.substr(1)),this.normalizePath(f,a)},a.resolveParents=function(b){for(var d,c="";b;){var a=b.id;if(!a)break;if(b.parent){var e=this.cfg.map[b.parent.id];e&&e[a]&&(a=e[a])}if(d="."===a.charAt(0),d&&(a="/"+a),a=a.substr(0,a.lastIndexOf("/")+1),c=a+c,!d)break;b=b.parent}return c.substr(0,c.lastIndexOf("/")+1)},a.normalizePath=function(e,i){var b=e+i,f="/"===e.charAt(0);b=(f?b.substr(1):b).split("/");var a,d,g,c=[],h=0;for(d=0,g=b.length;g>d;d++)a=b[d],"."===a||""===a||(".."===a?c.length>h?c.pop():(c.push(a),h++):c.push(a));return(f?"/":"")+c.join("/")},a.onNextTick=a.isNodeJs?function(a){process.nextTick(a)}:function(a){window.setTimeout(a,0)},a.require=function(a,b,c){if("string"==typeof a)return this.cache[a].instance;if(!Array.isArray(a))throw new Error("Invalid arguments signature for require()");this.createModule.call(this,this.initModule(c.id,a,b),!0)},a.mockModule=function(a,b){this.cache[a]={ready:!0,instance:b}};var b;a.isNodeJs?(b=GLOBAL,b.Minjector=new c):(b=window,b.Minjector=new c),b.define=a.define.bind(b.Minjector),b.define.amd={};