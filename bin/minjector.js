var t=function(e){this.config(e),this.contextId=null,this.cache={},this.defineQueue=[],this.processingWaitingForNextTick=!1,this.Bound={},this.Bound.processDefineQueue=this.processDefineQueue.bind(this)},e=t.prototype;e.isNodeJs="undefined"!=typeof exports&&this.exports!==exports,e.config=function(e){if(this.cfg={},"object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(this.cfg[i]=e[i])},e.define=function(e,i,t){var n=arguments.length;if(1===n&&(t=e,i=void 0,e=void 0),2===n&&(t=i,Array.isArray(e)?(i=e,e=void 0):i=void 0),"function"!=typeof t)throw new Error("InvalidArgumentException: Missing factory function.");var o=this.cache[e];if(o&&!(o instanceof Promise))throw new Error("InvalidStateException: Ambiguous module: "+e);this.defineQueue.push({id:e,dependencies:i,factory:t}),this.processOnNextTick()},e.createModule=function(i){var n=i.dependencies,o=[],r=!1;if(void 0!==n){var t,c,e,s;for(t=0,c=n.length;c>t;t++)s=n[t],e=this.cache[s],e||(e=this.requireDependencyInContext(s)),!r&&e instanceof Promise&&(r=!0),o.push(e)}return r?Promise.all(o).then(function(t){var e=i;return this.callFactoryCallback(e.id,t,e.factory)}.bind(this)).catch(function(e){console.log("Error occured: "+e+"\n"+e.stack)}):this.callFactoryCallback(i.id,o,i.factory)},e.callFactoryCallback=function(i,t,n){var e=n.apply(null,t);return this.cache[i]=e,e},e.requireDependencyInContext=function(e){var i=this.contextId;this.contextId=e;var t=this.requireDependency(e);return this.contextId=i,t},e.isNodeJs?e.requireDependency=function(e){return require(this.cfg.base+e),this.processDefineQueue(e)}:(e.domDocumentHead=document.head,e.requireDependency=function(e){var t=this,i=new Promise(function(o){var n=t,i=document.createElement("script");i.src=n.cfg.base+e+".js",i.type="text/javascript",i.charset="utf-8",i._moduleId=e,i.addEventListener("load",function(){var e=n.processDefineQueue(i._moduleId);e instanceof Promise?e.then(function(e){o(e)}):o(e)},!1),n.domDocumentHead.appendChild(i)});return this.cache[e]=i,i}),e.processDefineQueue=function(t){for(var e,n=this.defineQueue,i=[];n.length;)e=n.pop(),e.id||(e.id=t),i.push(e);this.processingWaitingForNextTick=!1;for(var o,r;i.length;)e=i.pop(),r=this.createModule(e),e.id===t&&(o=r);return o},e.processOnNextTick=function(){this.processingWaitingForNextTick||(this.processingWaitingForNextTick=!0,this.isNodeJs?process.nextTick(this.Bound.processDefineQueue):window.setTimeout(this.Bound.processDefineQueue,0))};var i;e.isNodeJs?(i=GLOBAL,i.Minjector=new t({base:process.cwd()})):(i=window,i.Minjector=new t({base:"./"})),i.define=e.define.bind(i.Minjector);