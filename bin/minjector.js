"use strict";var i=function(e){this.config(e),this.cache={},this.mockModule("require",this.require.bind(this)),this.isRequired={},this.defineQueue=[],this.procWaiting=!1,this.Bound={},this.Bound.processDefineQueue=this.processDefineQueue.bind(this)},e=i.prototype;e.isNodeJs="undefined"!=typeof exports&&this.exports!==exports,e.config=function(e){if(this.cfg={baseUrl:"./",libUrl:"./"},"object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&(this.cfg[t]=e[t])},e.define=function(e,t,i){var n=arguments.length;if(1===n&&(i=e,t=void 0,e=void 0),2===n&&(i=t,Array.isArray(e)?(t=e,e=void 0):t=void 0),"function"!=typeof i)throw new Error("Require module factory function: "+e);if(e&&this.cache[e])throw new Error("Found ambiguous module: "+e);var r={id:e,dependencies:t,factory:i,ready:!1,instance:null,listen:[],parent:null};e&&(this.cache[e]=r),this.defineQueue.push(r),this.procWaiting||(this.procWaiting=!0,this.onNextTick(this.Bound.processDefineQueue))},e.processDefineQueue=function(n,r){this.procWaiting=!1;var t=this.defineQueue;if(0!==t.length){for(var e,i=[];t.length;)e=t.pop(),e.parent=r,e.id||(e.id=n),i.push(e);for(;i.length;)this.createModule(i.pop())}},e.createModule=function(t){var s=t.dependencies,o=[],n=!1;if(void 0!==s){var r,c,e,i;for(r=0,c=s.length;c>r;r++)i=s[r],e=this.cache[i],e?e.ready?e=e.instance:(n=!0,e=this.listenOnCreation(e)):(n=!0,e=this.isRequired[i],e||(e=this.requireDependency(i,t),e instanceof Promise?this.isRequired[i]=e:n=!1)),o.push(e)}return this.cache[t.id]=t,n?(console.log("test"),t.instance=Promise.all(o).then(function(e){var i=t;return this.callFactoryCallback(i,e)}.bind(this)).catch(function(e){console.error(e.stack)})):this.callFactoryCallback(t,o),t},e.callFactoryCallback=function(e,n){e.instance=e.factory.apply(null,n),e.ready=!0,delete this.isRequired[e.id];var t,i;for(t=0,i=e.listen.length;i>t;t++)e.listen[t](e.instance);return delete e.listen,e},e.listenOnCreation=function(e){return new Promise(function(t){e.listen.push(function(e){t(e)})})},e.isNodeJs?e.requireDependency=function(e,i){require(this.createPath(e,i)),this.processDefineQueue(e,i);var t=this.cache[e];return t.ready?t.instance:new Promise(function(e){t.listen.push(function(t){e(t)})})}:(e.domDocumentHead=document.head,e.requireDependency=function(e,t){return new Promise(function(n){var i=document.createElement("script");i.src=this.createPath(e,t)+".js",i.type="text/javascript",i.charset="utf-8",i._moduleId=e,i.addEventListener("load",function(r){var i=r.target._moduleId;this.processDefineQueue(i,t);var e=this.cache[i];e.ready?n(e.instance):e.listen.push(function(e){n(e)})}.bind(this),!1),this.domDocumentHead.appendChild(i)}.bind(this))}),e.createPath=function(e,i){var t=e.charAt(0);return"."===t||"/"===t?this.normalizePath(this.cfg.baseUrl,e,i):this.cfg.libUrl+e},e.normalizePath=function(a,f,t){t={id:f,parent:t};for(var o="",u=!0;t;){var e=t.id;if(!e)break;if("/"===e.charAt(0)&&(e=e.substr(1)),"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),u!==!0&&(e=e.substr(0,e.lastIndexOf("/")+1)),u=!1,o=e+o,"."!==e.charAt(0))break;t=t.parent}var i=a+o,c="/"===a.charAt(0);i=(c?i.substr(1):i).split("/");var r,s,h,n=[],d=0;for(s=0,h=i.length;h>s;s++)r=i[s],"."===r||(".."===r?n.length>d?n.pop():(n.push(r),d++):n.push(r));return(c?"/":"")+n.join("/")},e.onNextTick=e.isNodeJs?function(e){process.nextTick(e)}:function(e){window.setTimeout(e,0)},e.require=function(e,t){return"string"==typeof e?this.cache[e].instance:void this.define.call(this,e,t)},e.mockModule=function(e,t){this.cache[e]={ready:!0,instance:t}};var t;e.isNodeJs?(t=GLOBAL,t.Minjector=new i):(t=window,t.Minjector=new i),t.define=e.define.bind(t.Minjector),t.define.amd={};