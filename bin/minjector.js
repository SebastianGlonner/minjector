var n=function(e){this.config(e),this.cache={},this.mockModule("require",this.require.bind(this)),this.isRequired={},this.defineQueue=[],this.procWaiting=!1,this.Bound={},this.Bound.processDefineQueue=this.processDefineQueue.bind(this)},e=n.prototype;e.isNodeJs="undefined"!=typeof exports&&this.exports!==exports,e.config=function(e){if(this.cfg={baseUrl:"./"},"object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(this.cfg[i]=e[i])},e.define=function(e,i,n){var t=arguments.length;if(1===t&&(n=e,i=void 0,e=void 0),2===t&&(n=i,Array.isArray(e)?(i=e,e=void 0):i=void 0),"function"!=typeof n)throw new Error("Require module factory function: "+e);if(e&&this.cache[e])throw new Error("Found ambiguous module: "+e);var s={id:e,dependencies:i,factory:n,ready:!1,instance:null,listen:[]};e&&(this.cache[e]=s),this.defineQueue.push(s),this.procWaiting||(this.procWaiting=!0,this.onNextTick(this.Bound.processDefineQueue))},e.processDefineQueue=function(t){this.procWaiting=!1;var i=this.defineQueue;if(0!==i.length){for(var e,n=[];i.length;)e=i.pop(),e.id||(e.id=t),n.push(e);for(;n.length;)e=n.pop(),creationResult=this.createModule(e)}},e.createModule=function(i){var r=i.dependencies,o=[],t=!1;if(void 0!==r){var s,c,e,n;for(s=0,c=r.length;c>s;s++)n=r[s],e=this.cache[n],e?e.ready?e=e.instance:(t=!0,e=this.listenOnCreation(e)):(t=!0,e=this.isRequired[n],e||(e=this.requireDependency(n),e instanceof Promise?this.isRequired[n]=e:t=!1)),o.push(e)}return this.cache[i.id]=i,t?i.instance=Promise.all(o).then(function(e){var n=i;return this.callFactoryCallback(n,e)}.bind(this)):this.callFactoryCallback(i,o),i},e.callFactoryCallback=function(e,t){e.instance=e.factory.apply(null,t),e.ready=!0,delete this.isRequired[e.id];var i,n;for(i=0,n=e.listen.length;n>i;i++)e.listen[i](e.instance);return delete e.listen,e},e.listenOnCreation=function(e){return new Promise(function(i){e.listen.push(function(e){i(e)})})},e.isNodeJs?e.requireDependency=function(e){require(this.cfg.baseUrl+e),this.processDefineQueue(e);var i=this.cache[e];return i.ready?i.instance:new Promise(function(e){i.listen.push(function(i){e(i)})})}:(e.domDocumentHead=document.head,e.requireDependency=function(e){return new Promise(function(n){var i=document.createElement("script");i.src=this.cfg.baseUrl+e+".js",i.type="text/javascript",i.charset="utf-8",i._moduleId=e,i.addEventListener("load",function(t){var i=t.target._moduleId;this.processDefineQueue(i);var e=this.cache[i];e.ready?n(e.instance):e.listen.push(function(e){n(e)})}.bind(this),!1),this.domDocumentHead.appendChild(i)}.bind(this))}),e.onNextTick=e.isNodeJs?function(e){process.nextTick(e)}:function(e){setTimeout(e,0)},e.require=function(e,i){return"string"==typeof e?this.cache[e].instance:void define.call(this,e,i)},e.mockModule=function(e,i){this.cache[e]={ready:!0,instance:i}},e.define.amd=!0,e.define.jQuery=!0;var i;e.isNodeJs?(i=GLOBAL,i.Minjector=new n({base:process.cwd()})):(i=window,i.Minjector=new n({base:"./"})),i.define=e.define.bind(i.Minjector);